import{B as X,S as Y,V as J}from"./BaseTraining.BtBRkRPh.js";import{w as I,T as U}from"./runtime-dom.esm-bundler.lyr1qLhx.js";/* empty css                        */import{_ as Q}from"./_plugin-vue_export-helper.C1BGYAOa.js";import{d as W,j as F,l as h,p as B,m as g,c as w,u as G,b as e,g as E,F as K,q as L,T as Z,r as d,k as $,w as ee,o as te,x as se,y as V,e as x,f as D}from"./runtime-core.esm-bundler.DsaXcS8p.js";import"./router.C7hpXdoi.js";const ne=W({__name:"ScratchPad",props:{visible:{type:Boolean}},emits:["close"],setup(y,{expose:a,emit:i}){a();const t=y,p=i,u=d(null),s=d(null),c=d(!1),f=d("#ffffff"),v=d(4),m=d(!1),_=[{value:"#ffffff",name:"白色"},{value:"#ef4444",name:"红色"},{value:"#22c55e",name:"绿色"},{value:"#3b82f6",name:"蓝色"},{value:"#eab308",name:"黄色"}],b=$(()=>v.value*4),k=()=>{if(!u.value)return;const n=u.value,o=window.devicePixelRatio||1;n.width=window.innerWidth*o,n.height=window.innerHeight*o,n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",s.value=n.getContext("2d"),s.value&&(s.value.scale(o,o),s.value.lineCap="round",s.value.lineJoin="round")},C=n=>{if("touches"in n){const o=n.touches[0]||n.changedTouches[0];return{x:o.clientX,y:o.clientY}}return{x:n.clientX,y:n.clientY}},S=n=>{if(!s.value)return;c.value=!0;const o=C(n);s.value.beginPath(),s.value.moveTo(o.x,o.y)},T=n=>{if(!c.value||!s.value)return;n.preventDefault();const o=C(n);m.value?(s.value.globalCompositeOperation="destination-out",s.value.strokeStyle="rgba(0,0,0,1)",s.value.lineWidth=b.value):(s.value.globalCompositeOperation="source-over",s.value.strokeStyle=f.value,s.value.lineWidth=v.value),s.value.lineTo(o.x,o.y),s.value.stroke()},R=()=>{c.value=!1},A=()=>{!s.value||!u.value||s.value.clearRect(0,0,u.value.width,u.value.height)},j=()=>{m.value=!m.value},M=n=>{f.value=n,m.value=!1},r=()=>{k()};ee(()=>t.visible,n=>{n&&setTimeout(k,0)}),te(()=>{window.addEventListener("resize",r)}),se(()=>{window.removeEventListener("resize",r)});const l={props:t,emit:p,canvasRef:u,ctx:s,isDrawing:c,currentColor:f,lineWidth:v,isEraser:m,colors:_,eraserWidth:b,setupCanvas:k,getPosition:C,startDrawing:S,draw:T,stopDrawing:R,clearCanvas:A,toggleEraser:j,selectColor:M,handleResize:r};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),ae={key:0,class:"fixed inset-0 z-100 bg-black/60 touch-none"},oe={class:"absolute bottom-4 left-2 right-2 sm:inset-x-auto sm:left-1/2 sm:-translate-x-1/2 sm:max-w-md flex flex-col items-center gap-3 bg-base-100/90 backdrop-blur-sm rounded-2xl px-3 sm:px-5 py-4 shadow-lg"},re={class:"flex items-center gap-3 flex-wrap justify-center"},le=["title","onClick"],ie={class:"flex items-center justify-center gap-4 w-full"},ue={class:"flex items-center gap-2"},ce=["title","onClick"];function de(y,a,i,t,p,u){return h(),F(Z,{to:"body"},[B(U,{name:"fade"},{default:g(()=>[i.visible?(h(),w("div",ae,[e("button",{class:"absolute top-4 right-4 z-10 btn btn-circle btn-ghost bg-base-100/80 backdrop-blur-sm",title:"关闭",onClick:a[0]||(a[0]=s=>t.emit("close"))},[...a[1]||(a[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("canvas",{ref:"canvasRef",class:E(["absolute inset-0",t.isEraser?"cursor-cell":"cursor-crosshair"]),onMousedown:t.startDrawing,onMousemove:t.draw,onMouseup:t.stopDrawing,onMouseleave:t.stopDrawing,onTouchstart:I(t.startDrawing,["prevent"]),onTouchmove:I(t.draw,["prevent"]),onTouchend:t.stopDrawing,onTouchcancel:t.stopDrawing},null,34),e("div",oe,[e("div",re,[(h(),w(K,null,L(t.colors,s=>e("button",{key:s.value,class:E(["w-11 h-11 rounded-full border-3 transition-transform hover:scale-110 active:scale-95",[!t.isEraser&&t.currentColor===s.value?"border-white scale-110 ring-2 ring-primary":"border-transparent"]]),style:V({backgroundColor:s.value}),title:s.name,onClick:c=>t.selectColor(s.value)},null,14,le)),64)),e("button",{class:E(["w-11 h-11 rounded-full border-3 transition-transform hover:scale-110 active:scale-95 flex items-center justify-center bg-base-200",t.isEraser?"border-white scale-110 ring-2 ring-primary":"border-transparent"]),title:"橡皮擦",onClick:t.toggleEraser},[...a[2]||(a[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),e("path",{d:"M22 21H7"}),e("path",{d:"m5 11 9 9"})],-1)])],2)]),a[5]||(a[5]=e("div",{class:"divider my-0 w-full h-px"},null,-1)),e("div",ie,[e("div",ue,[(h(),w(K,null,L([2,4,6],s=>e("button",{key:s,class:E(["w-10 h-10 rounded-full flex items-center justify-center transition-all active:scale-90",t.lineWidth===s?"bg-primary/30 ring-2 ring-primary/50":"hover:bg-base-200"]),title:`线条粗细 ${s}`,onClick:c=>t.lineWidth=s},[e("span",{class:"rounded-full bg-current",style:V({width:s*2+"px",height:s*2+"px"})},null,4)],10,ce)),64))]),a[4]||(a[4]=e("div",{class:"w-px h-8 bg-base-300"},null,-1)),e("button",{class:"btn btn-ghost gap-2 px-4",title:"清除画布",onClick:t.clearCanvas},[...a[3]||(a[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",{class:"hidden sm:inline"},"清除",-1)])])])])])):G("",!0)]),_:1})])}const me=Q(ne,[["render",de],["__scopeId","data-v-3a0e2fd0"]]),fe=W({__name:"Multiply25_125",props:{numQuestions:{},type:{},storageKey:{}},setup(y,{expose:a}){a();const i=d(""),t=d(!1),p=d([]),u=d(0),s=d(!1),c=[25,50,75],f=[125,250,375,500,625,750,875],v=[.01,.1,1],m=r=>Number.isInteger(r)?r.toString():parseFloat(r.toFixed(4)).toString(),_=r=>{const l=Math.random();if(r){if(l<.4)return 125;const n=f[Math.floor(Math.random()*f.length)],o=v[Math.floor(Math.random()*v.length)];return n*o}else{if(l<.4)return 25;const n=c[Math.floor(Math.random()*c.length)],o=v[Math.floor(Math.random()*v.length)];return n*o}},b=(r=!1)=>{if(r)return Math.floor(Math.random()*20)+1;const l=Math.floor(Math.random()*99)+1,n=Math.random();return n<.6?l:n<.85?l*.1:l*.01},M={currentInput:i,finished:t,finalResults:p,finalTotalTime:u,showScratchPad:s,BASE_25:c,BASE_125:f,SCALES:v,formatNum:m,generateFactor:_,generateMultiplier:b,generateQuestion:()=>{const r=Math.random()>.5,l=_(r),n=[625,875,6.25,8.75,62.5,87.5].includes(l),o=b(n),P=Math.random()>.5,N=P?o:l,z=P?l:o,H=m(N),O=m(z),q=l*o;return{display:`${H} × ${O}`,answer:m(q),factor1:N,factor2:z}},isRight:(r,l)=>{const n=parseFloat(l),o=parseFloat(r.answer);return isNaN(n)?!1:Math.abs(n-o)<.001},handleComplete:(r,l)=>{p.value=r,u.value=l,t.value=!0},handleInput:r=>{const l=i.value+r;/^\d{0,8}(\.\d{0,4})?$/.test(l)&&(i.value=l)},handleDelete:()=>{i.value=i.value.slice(0,-1)},handleConfirm:async r=>{i.value!==""&&(r(i.value),i.value="")},handleRestart:()=>{t.value=!1,i.value="",p.value=[],u.value=0},VirtualKeypad:J,Summary:Y,BaseTraining:X,ScratchPad:me};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),ve={class:"card w-full bg-base-100 shadow-xl mb-8 relative"},he={class:"card-body items-center text-center py-8 sm:py-12"},pe={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4"},ge={class:"text-4xl sm:text-5xl font-bold font-mono flex items-center gap-2 sm:gap-4"},be={class:"inline-flex items-center justify-center min-w-36 px-3 py-1 rounded-lg bg-base-200 border-2 border-primary/50 text-4xl sm:text-5xl font-bold font-mono"},xe={key:0},we={key:1,class:"animate-pulse text-base-content/30"},ye={class:"mt-auto w-full"};function _e(y,a,i,t,p,u){return t.finished?(h(),F(t.Summary,{key:1,results:t.finalResults,totalTime:t.finalTotalTime,storageKey:i.storageKey,onRestart:t.handleRestart},{question:g(({result:s})=>[e("span",null,x(s.question.display),1)]),userAnswer:g(({result:s})=>[e("span",null,x(s.userAnswer),1)]),correctAnswer:g(({result:s})=>[e("span",null,x(s.question.answer),1)]),_:1},8,["results","totalTime","storageKey"])):(h(),F(t.BaseTraining,{key:0,type:i.type,storageKey:i.storageKey,numQuestions:i.numQuestions,generateQuestion:t.generateQuestion,isRight:t.isRight,onComplete:t.handleComplete},{description:g(()=>[...a[2]||(a[2]=[e("h2",{class:"card-title text-3xl font-bold mb-6"},"25/125 乘法速算",-1),e("div",{class:"text-left w-full mb-8"},[e("div",{class:"bg-base-200 p-5 rounded-2xl"},[e("div",{class:"flex items-center gap-2 mb-4 text-base-content/80"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h3",{class:"font-bold text-lg"},"速算技巧")]),e("div",{class:"space-y-3"},[e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-primary badge-sm"},"25"),D(" 25 = 100 ÷ 4 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[e("span",{class:"font-mono"},"25 × n = n ÷ 4 × 100"),e("div",{class:"text-xs opacity-60 mt-1"},"例: 25 × 8 = 8 ÷ 4 × 100 = 200")])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-secondary badge-sm"},"125"),D(" 125 = 1000 ÷ 8 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[e("span",{class:"font-mono"},"125 × n = n ÷ 8 × 1000"),e("div",{class:"text-xs opacity-60 mt-1"},"例: 125 × 8 = 8 ÷ 8 × 1000 = 1000")])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-info/30 shadow-sm"},[e("div",{class:"text-sm opacity-80"},[e("span",{class:"font-bold text-info"},"练习范围："),D(" 与25/125及倍数相关的数的乘法计算，如 75 * 5 等数相乘的题目。 ")])])])])],-1)])]),default:g(({question:s,confirm:c})=>[e("div",ve,[e("div",he,[e("div",pe,[e("h2",ge,[e("span",null,x(s.display),1),a[3]||(a[3]=e("span",null,"=",-1))]),e("span",be,[t.currentInput?(h(),w("span",xe,x(t.currentInput),1)):(h(),w("span",we,"?"))])])]),e("button",{class:"absolute top-2 right-2 btn btn-sm btn-ghost opacity-60 hover:opacity-100",title:"打开草稿板",onClick:a[0]||(a[0]=f=>t.showScratchPad=!0)},[...a[4]||(a[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])])]),e("div",ye,[B(t.VirtualKeypad,{onInput:t.handleInput,onDelete:t.handleDelete,onConfirm:()=>t.handleConfirm(c)},null,8,["onConfirm"])]),B(t.ScratchPad,{visible:t.showScratchPad,onClose:a[1]||(a[1]=f=>t.showScratchPad=!1)},null,8,["visible"])]),_:1},8,["type","storageKey","numQuestions"]))}const Be=Q(fe,[["render",_e]]);export{Be as default};
