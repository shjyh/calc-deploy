import{B as X,S as Y,V as J}from"./BaseTraining.BtBRkRPh.js";import{w as I,T as U}from"./runtime-dom.esm-bundler.lyr1qLhx.js";/* empty css                        */import{_ as Q}from"./_plugin-vue_export-helper.C1BGYAOa.js";import{d as W,j as B,l as v,p as S,m as w,c as k,u as G,b as e,g as F,F as K,q as L,T as Z,r as c,k as $,w as ee,o as te,x as se,y as V,e as C,f as M}from"./runtime-core.esm-bundler.DsaXcS8p.js";import"./router.C7hpXdoi.js";const ne=W({__name:"ScratchPad",props:{visible:{type:Boolean}},emits:["close"],setup(D,{expose:o,emit:l}){o();const t=D,f=l,i=c(null),s=c(null),u=c(!1),m=c("#ffffff"),p=c(4),d=c(!1),h=[{value:"#ffffff",name:"白色"},{value:"#ef4444",name:"红色"},{value:"#22c55e",name:"绿色"},{value:"#3b82f6",name:"蓝色"},{value:"#eab308",name:"黄色"}],y=$(()=>p.value*4),g=()=>{if(!i.value)return;const n=i.value,a=window.devicePixelRatio||1;n.width=window.innerWidth*a,n.height=window.innerHeight*a,n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",s.value=n.getContext("2d"),s.value&&(s.value.scale(a,a),s.value.lineCap="round",s.value.lineJoin="round")},E=n=>{if("touches"in n){const a=n.touches[0]||n.changedTouches[0];return{x:a.clientX,y:a.clientY}}return{x:n.clientX,y:n.clientY}},T=n=>{if(!s.value)return;u.value=!0;const a=E(n);s.value.beginPath(),s.value.moveTo(a.x,a.y)},R=n=>{if(!u.value||!s.value)return;n.preventDefault();const a=E(n);d.value?(s.value.globalCompositeOperation="destination-out",s.value.strokeStyle="rgba(0,0,0,1)",s.value.lineWidth=y.value):(s.value.globalCompositeOperation="source-over",s.value.strokeStyle=m.value,s.value.lineWidth=p.value),s.value.lineTo(a.x,a.y),s.value.stroke()},A=()=>{u.value=!1},j=()=>{!s.value||!i.value||s.value.clearRect(0,0,i.value.width,i.value.height)},P=()=>{d.value=!d.value},N=n=>{m.value=n,d.value=!1},b=()=>{g()};ee(()=>t.visible,n=>{n&&setTimeout(g,0)}),te(()=>{window.addEventListener("resize",b)}),se(()=>{window.removeEventListener("resize",b)});const r={props:t,emit:f,canvasRef:i,ctx:s,isDrawing:u,currentColor:m,lineWidth:p,isEraser:d,colors:h,eraserWidth:y,setupCanvas:g,getPosition:E,startDrawing:T,draw:R,stopDrawing:A,clearCanvas:j,toggleEraser:P,selectColor:N,handleResize:b};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),oe={key:0,class:"fixed inset-0 z-100 bg-black/60 touch-none"},ae={class:"absolute bottom-4 left-2 right-2 sm:inset-x-auto sm:left-1/2 sm:-translate-x-1/2 sm:max-w-md flex flex-col items-center gap-3 bg-base-100/90 backdrop-blur-sm rounded-2xl px-3 sm:px-5 py-4 shadow-lg"},re={class:"flex items-center gap-3 flex-wrap justify-center"},le=["title","onClick"],ie={class:"flex items-center justify-center gap-4 w-full"},ue={class:"flex items-center gap-2"},ce=["title","onClick"];function de(D,o,l,t,f,i){return v(),B(Z,{to:"body"},[S(U,{name:"fade"},{default:w(()=>[l.visible?(v(),k("div",oe,[e("button",{class:"absolute top-4 right-4 z-10 btn btn-circle btn-ghost bg-base-100/80 backdrop-blur-sm",title:"关闭",onClick:o[0]||(o[0]=s=>t.emit("close"))},[...o[1]||(o[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("canvas",{ref:"canvasRef",class:F(["absolute inset-0",t.isEraser?"cursor-cell":"cursor-crosshair"]),onMousedown:t.startDrawing,onMousemove:t.draw,onMouseup:t.stopDrawing,onMouseleave:t.stopDrawing,onTouchstart:I(t.startDrawing,["prevent"]),onTouchmove:I(t.draw,["prevent"]),onTouchend:t.stopDrawing,onTouchcancel:t.stopDrawing},null,34),e("div",ae,[e("div",re,[(v(),k(K,null,L(t.colors,s=>e("button",{key:s.value,class:F(["w-11 h-11 rounded-full border-3 transition-transform hover:scale-110 active:scale-95",[!t.isEraser&&t.currentColor===s.value?"border-white scale-110 ring-2 ring-primary":"border-transparent"]]),style:V({backgroundColor:s.value}),title:s.name,onClick:u=>t.selectColor(s.value)},null,14,le)),64)),e("button",{class:F(["w-11 h-11 rounded-full border-3 transition-transform hover:scale-110 active:scale-95 flex items-center justify-center bg-base-200",t.isEraser?"border-white scale-110 ring-2 ring-primary":"border-transparent"]),title:"橡皮擦",onClick:t.toggleEraser},[...o[2]||(o[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),e("path",{d:"M22 21H7"}),e("path",{d:"m5 11 9 9"})],-1)])],2)]),o[5]||(o[5]=e("div",{class:"divider my-0 w-full h-px"},null,-1)),e("div",ie,[e("div",ue,[(v(),k(K,null,L([2,4,6],s=>e("button",{key:s,class:F(["w-10 h-10 rounded-full flex items-center justify-center transition-all active:scale-90",t.lineWidth===s?"bg-primary/30 ring-2 ring-primary/50":"hover:bg-base-200"]),title:`线条粗细 ${s}`,onClick:u=>t.lineWidth=s},[e("span",{class:"rounded-full bg-current",style:V({width:s*2+"px",height:s*2+"px"})},null,4)],10,ce)),64))]),o[4]||(o[4]=e("div",{class:"w-px h-8 bg-base-300"},null,-1)),e("button",{class:"btn btn-ghost gap-2 px-4",title:"清除画布",onClick:t.clearCanvas},[...o[3]||(o[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",{class:"hidden sm:inline"},"清除",-1)])])])])])):G("",!0)]),_:1})])}const me=Q(ne,[["render",de],["__scopeId","data-v-3a0e2fd0"]]),ve=W({__name:"Multiply25_125",props:{numQuestions:{},type:{},storageKey:{}},setup(D,{expose:o}){o();const l=c(""),t=c(!1),f=c([]),i=c(0),s=c(!1),u=[25,50,75],m=[125,250,375,500,625,750,875],p=[.01,.1,1,10],d=r=>h(r).replace(".","").replace("-","").length,h=r=>Number.isInteger(r)?r.toString():parseFloat(r.toFixed(4)).toString(),y=r=>{const n=r?m:u,a=n[Math.floor(Math.random()*n.length)],x=p[Math.floor(Math.random()*p.length)],_=a*x;return d(_)<=3?_:a},g=()=>{if(Math.random()<.7)return Math.floor(Math.random()*99)+1;{const n=Math.round((Math.random()*98.9+.1)*10)/10;return d(n)<=3?n:Math.floor(n)}},b={currentInput:l,finished:t,finalResults:f,finalTotalTime:i,showScratchPad:s,BASE_25:u,BASE_125:m,SCALES:p,getDigitCount:d,formatNum:h,generateFactor:y,generateMultiplier:g,generateQuestion:()=>{const r=Math.random()>.5,n=y(r),a=g(),x=Math.random()>.5,_=x?a:n,z=x?n:a,H=h(_),O=h(z),q=n*a;return{display:`${H} × ${O}`,answer:h(q),factor1:_,factor2:z}},isRight:(r,n)=>{const a=parseFloat(n),x=parseFloat(r.answer);return isNaN(a)?!1:Math.abs(a-x)<.001},handleComplete:(r,n)=>{f.value=r,i.value=n,t.value=!0},handleInput:r=>{const n=l.value+r;/^\d{0,8}(\.\d{0,4})?$/.test(n)&&(l.value=n)},handleDelete:()=>{l.value=l.value.slice(0,-1)},handleConfirm:async r=>{l.value!==""&&(r(l.value),l.value="")},handleRestart:()=>{t.value=!1,l.value="",f.value=[],i.value=0},VirtualKeypad:J,Summary:Y,BaseTraining:X,ScratchPad:me};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),fe={class:"card w-full bg-base-100 shadow-xl mb-8 relative"},pe={class:"card-body items-center text-center py-8 sm:py-12"},he={class:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4"},ge={class:"text-4xl sm:text-5xl font-bold font-mono flex items-center gap-2 sm:gap-4"},be={class:"inline-flex items-center justify-center min-w-36 px-3 py-1 rounded-lg bg-base-200 border-2 border-primary/50 text-4xl sm:text-5xl font-bold font-mono"},xe={key:0},we={key:1,class:"animate-pulse text-base-content/30"},ye={class:"mt-auto w-full"};function _e(D,o,l,t,f,i){return t.finished?(v(),B(t.Summary,{key:1,results:t.finalResults,totalTime:t.finalTotalTime,storageKey:l.storageKey,onRestart:t.handleRestart},{question:w(({result:s})=>[e("span",null,C(s.question.display),1)]),userAnswer:w(({result:s})=>[e("span",null,C(s.userAnswer),1)]),correctAnswer:w(({result:s})=>[e("span",null,C(s.question.answer),1)]),_:1},8,["results","totalTime","storageKey"])):(v(),B(t.BaseTraining,{key:0,type:l.type,storageKey:l.storageKey,numQuestions:l.numQuestions,generateQuestion:t.generateQuestion,isRight:t.isRight,onComplete:t.handleComplete},{description:w(()=>[...o[2]||(o[2]=[e("h2",{class:"card-title text-3xl font-bold mb-6"},"25/125 乘法速算",-1),e("div",{class:"text-left w-full mb-8"},[e("div",{class:"bg-base-200 p-5 rounded-2xl"},[e("div",{class:"flex items-center gap-2 mb-4 text-base-content/80"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h3",{class:"font-bold text-lg"},"速算技巧")]),e("div",{class:"space-y-3"},[e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-primary badge-sm"},"25"),M(" 25 = 100 ÷ 4 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[e("span",{class:"font-mono"},"25 × n = n ÷ 4 × 100"),e("div",{class:"text-xs opacity-60 mt-1"},"例: 25 × 8 = 8 ÷ 4 × 100 = 200")])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-secondary badge-sm"},"125"),M(" 125 = 1000 ÷ 8 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[e("span",{class:"font-mono"},"125 × n = n ÷ 8 × 1000"),e("div",{class:"text-xs opacity-60 mt-1"},"例: 125 × 8 = 8 ÷ 8 × 1000 = 1000")])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-info/30 shadow-sm"},[e("div",{class:"text-sm opacity-80"},[e("span",{class:"font-bold text-info"},"练习范围："),M(" 与25/125及倍数相关的数的乘法计算，如 75 * 5 等数相乘的题目。 ")])])])])],-1)])]),default:w(({question:s,confirm:u})=>[e("div",fe,[e("div",pe,[e("div",he,[e("h2",ge,[e("span",null,C(s.display),1),o[3]||(o[3]=e("span",null,"=",-1))]),e("span",be,[t.currentInput?(v(),k("span",xe,C(t.currentInput),1)):(v(),k("span",we,"?"))])])]),e("button",{class:"absolute top-2 right-2 btn btn-sm btn-ghost opacity-60 hover:opacity-100",title:"打开草稿板",onClick:o[0]||(o[0]=m=>t.showScratchPad=!0)},[...o[4]||(o[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])])]),e("div",ye,[S(t.VirtualKeypad,{onInput:t.handleInput,onDelete:t.handleDelete,onConfirm:()=>t.handleConfirm(u)},null,8,["onConfirm"])]),S(t.ScratchPad,{visible:t.showScratchPad,onClose:o[1]||(o[1]=m=>t.showScratchPad=!1)},null,8,["visible"])]),_:1},8,["type","storageKey","numQuestions"]))}const Be=Q(ve,[["render",_e]]);export{Be as default};
