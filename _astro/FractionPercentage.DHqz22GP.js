import{B as k,S as C,V as D}from"./BaseTraining.BtBRkRPh.js";import{M as B}from"./MathDisplay.DZ5l3ltn.js";import{_ as M}from"./_plugin-vue_export-helper.C1BGYAOa.js";import{d as I,j as p,m,r as b,l,b as e,p as x,c as f,F as P,e as h,f as d}from"./runtime-core.esm-bundler.DsaXcS8p.js";/* empty css                        */import"./router.C7hpXdoi.js";const S=I({__name:"FractionPercentage",props:{numQuestions:{},type:{},storageKey:{}},setup(F,{expose:i}){i();const s=b(""),t=b(!1),g=b([]),y=b(0),n=a=>Number.isInteger(a)?a.toString():Number.isInteger(a*10)?a.toFixed(1):Number.isInteger(a*1e3)?a.toFixed(3):parseFloat(a.toFixed(2)).toString(),w={currentInput:s,finished:t,finalResults:g,finalTotalTime:y,formatNumber:n,generateQuestion:()=>{const a=Math.random()>.5?"toPercentage":"toFraction",o=Math.floor(Math.random()*19)+2,r=1/o;if(a==="toPercentage"){const u=r*100,c=Math.round(u*10)/10;return{display:`${o}\\1`,answer:c.toString(),type:"toPercentage"}}else{const u=Math.random()>.5;let c="";return u?c=`${n(r*100)}%`:c=parseFloat(r.toFixed(3)).toString(),{display:c,answer:o.toString(),type:"toFraction"}}},isRight:(a,o)=>{if(a.type==="toPercentage"){const r=parseFloat(o),u=parseFloat(a.answer);return isNaN(r)?!1:Math.abs(r-u)<.06}else return parseInt(o)===parseInt(a.answer)},handleComplete:(a,o)=>{g.value=a,y.value=o,t.value=!0},handleInput:(a,o)=>{const r=s.value+a;if(o==="toPercentage"){if(!/^\d{0,2}(\.\d{0,2})?$/.test(r))return}else if(!/^\d{0,2}$/.test(r))return;s.value=r},handleDelete:()=>{s.value=s.value.slice(0,-1)},handleConfirm:async a=>{s.value!==""&&(a(s.value),s.value="")},handleRestart:()=>{t.value=!1,s.value="",g.value=[],y.value=0},VirtualKeypad:D,Summary:C,MathDisplay:B,BaseTraining:k};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),N={class:"card w-full bg-base-100 shadow-xl mb-8"},E={class:"card-body items-center text-center py-12"},R={class:"card-title text-5xl font-bold font-mono flex items-center gap-4"},K={class:"inline-flex items-center justify-center w-36 px-3 py-1 rounded-lg bg-base-200 border-2 border-primary/50"},T={key:0},Q={key:1,class:"animate-pulse text-base-content/30"},V={class:"mt-auto w-full"},j={key:0},A={key:0};function q(F,i,s,t,g,y){return t.finished?(l(),p(t.Summary,{key:1,results:t.finalResults,totalTime:t.finalTotalTime,storageKey:s.storageKey,onRestart:t.handleRestart},{question:m(({result:n})=>[x(t.MathDisplay,{value:n.question.display},null,8,["value"])]),userAnswer:m(({result:n})=>[n.question.type==="toPercentage"?(l(),f("span",j,h(n.userAnswer)+"%",1)):(l(),p(t.MathDisplay,{key:1,value:`${n.userAnswer}\\1`},null,8,["value"]))]),correctAnswer:m(({result:n})=>[n.question.type==="toPercentage"?(l(),f("span",A,h(n.question.answer)+"%",1)):(l(),p(t.MathDisplay,{key:1,value:`${n.question.answer}\\1`},null,8,["value"]))]),_:1},8,["results","totalTime","storageKey"])):(l(),p(t.BaseTraining,{key:0,type:s.type,storageKey:s.storageKey,numQuestions:s.numQuestions,generateQuestion:t.generateQuestion,isRight:t.isRight,onComplete:t.handleComplete},{description:m(()=>[...i[0]||(i[0]=[e("h2",{class:"card-title text-3xl font-bold mb-6"},"分数与百分比转换",-1),e("div",{class:"text-left w-full mb-8"},[e("div",{class:"bg-base-200 p-5 rounded-2xl"},[e("div",{class:"flex items-center gap-2 mb-4 text-base-content/80"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h3",{class:"font-bold text-lg"},"题型说明")]),e("div",{class:"space-y-3"},[e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-primary badge-sm"},"1"),d(" 分数 ➔ 百分比 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[d(" 如 "),e("span",{class:"font-mono font-bold mx-1"},"1/3"),d(" 需输入 "),e("span",{class:"font-mono font-bold mx-1"},"33.3"),e("div",{class:"text-xs text-warning mt-1 font-medium"},"* 至少精确到一位小数")])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-secondary badge-sm"},"2"),d(" 百分比/小数 ➔ 分数 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[d(" 如 "),e("span",{class:"font-mono font-bold mx-1"},"5%"),d(" 需输入 "),e("span",{class:"font-mono font-bold mx-1"},"20"),e("div",{class:"text-xs opacity-60 mt-1"},"(即 1/20 的分母)")])])])])],-1)])]),default:m(({question:n,confirm:v})=>[e("div",N,[e("div",E,[e("h2",R,[x(t.MathDisplay,{value:n.display},null,8,["value"]),i[2]||(i[2]=e("span",null,"=",-1)),n.type==="toPercentage"?(l(),f(P,{key:0},[e("span",K,[t.currentInput?(l(),f("span",T,h(t.currentInput),1)):(l(),f("span",Q,"?"))]),i[1]||(i[1]=e("span",null,"%",-1))],64)):(l(),p(t.MathDisplay,{key:1,value:`${t.currentInput||"?"}\\1`,class:"w-20 px-3 py-1 rounded-lg bg-base-200 border-2 border-primary/50"},null,8,["value"]))])])]),e("div",V,[x(t.VirtualKeypad,{onInput:_=>t.handleInput(_,n.type),onDelete:t.handleDelete,onConfirm:()=>t.handleConfirm(v)},null,8,["onInput","onConfirm"])])]),_:1},8,["type","storageKey","numQuestions"]))}const $=M(S,[["render",q]]);export{$ as default};
