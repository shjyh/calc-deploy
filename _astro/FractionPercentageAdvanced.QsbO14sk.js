import{B as D,S as k,V as C}from"./BaseTraining.BtBRkRPh.js";import{M as E}from"./MathDisplay.DZ5l3ltn.js";import{_ as M}from"./_plugin-vue_export-helper.C1BGYAOa.js";import{d as I,j as p,m,r as h,l,b as e,p as v,c as f,F as P,e as F,f as d}from"./runtime-core.esm-bundler.DsaXcS8p.js";/* empty css                        */import"./router.C7hpXdoi.js";const S=I({__name:"FractionPercentageAdvanced",props:{numQuestions:{},type:{},storageKey:{}},setup(B,{expose:u}){u();const s=h(""),t=h(!1),g=h([]),y=h(0),n=[...Array.from({length:19},(a,o)=>[1,o+2]),[2,3],[3,4],[2,5],[3,5],[4,5],[5,6],[2,7],[3,7],[3,8],[5,8],[7,8],[2,9],[4,9],[5,9],[7,9],[8,9]],b=a=>Number.isInteger(a)?a.toString():Number.isInteger(a*10)?a.toFixed(1):Number.isInteger(a*1e3)?a.toFixed(3):parseFloat(a.toFixed(2)).toString(),w={currentInput:s,finished:t,finalResults:g,finalTotalTime:y,SPECIAL_FRACTIONS:n,formatNumber:b,generateQuestion:()=>{const a=Math.random()>.5?"toPercentage":"toFraction",[o,r]=n[Math.floor(Math.random()*n.length)],i=o/r;if(a==="toPercentage"){const x=i*100,c=Math.round(x*10)/10;return{display:`${r}\\${o}`,answer:c.toString(),type:"toPercentage"}}else{const x=Math.random()>.5;let c="";return x?c=`${b(i*100)}%`:c=parseFloat(i.toFixed(3)).toString(),{display:c,answer:`${r}\\${o}`,type:"toFraction"}}},isRight:(a,o)=>{if(a.type==="toPercentage"){const r=parseFloat(o),i=parseFloat(a.answer);return isNaN(r)?!1:Math.abs(r-i)<.06}else return o===a.answer},handleComplete:(a,o)=>{g.value=a,y.value=o,t.value=!0},handleInput:(a,o)=>{const r=s.value+a;if(o==="toPercentage"){if(!/^\d{0,3}(\.\d{0,2})?$/.test(r))return}else if(!/^\d{0,2}(\\(\d{0,2})?)?$/.test(r))return;s.value=r},handleDelete:()=>{s.value=s.value.slice(0,-1)},handleConfirm:async(a,o)=>{s.value!==""&&(o==="toFraction"&&(!s.value.includes("\\")||s.value.endsWith("\\")||s.value.startsWith("\\"))||(a(s.value),s.value=""))},handleRestart:()=>{t.value=!1,s.value="",g.value=[],y.value=0},VirtualKeypad:C,Summary:k,MathDisplay:E,BaseTraining:D};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),A={class:"card w-full bg-base-100 shadow-xl mb-8"},N={class:"card-body items-center text-center py-12"},R={class:"card-title text-5xl font-bold font-mono flex items-center gap-4"},T={class:"inline-flex items-center justify-center w-36 px-3 py-1 rounded-lg bg-base-200 border-2 border-primary/50"},K={key:0},Q={key:1,class:"animate-pulse text-base-content/30"},V={class:"mt-auto w-full"},j={key:0},O={key:0};function W(B,u,s,t,g,y){return t.finished?(l(),p(t.Summary,{key:1,results:t.finalResults,totalTime:t.finalTotalTime,storageKey:s.storageKey,onRestart:t.handleRestart},{question:m(({result:n})=>[v(t.MathDisplay,{value:n.question.display},null,8,["value"])]),userAnswer:m(({result:n})=>[n.question.type==="toPercentage"?(l(),f("span",j,F(n.userAnswer)+"%",1)):(l(),p(t.MathDisplay,{key:1,value:n.userAnswer},null,8,["value"]))]),correctAnswer:m(({result:n})=>[n.question.type==="toPercentage"?(l(),f("span",O,F(n.question.answer)+"%",1)):(l(),p(t.MathDisplay,{key:1,value:n.question.answer},null,8,["value"]))]),_:1},8,["results","totalTime","storageKey"])):(l(),p(t.BaseTraining,{key:0,type:s.type,storageKey:s.storageKey,numQuestions:s.numQuestions,generateQuestion:t.generateQuestion,isRight:t.isRight,onComplete:t.handleComplete},{description:m(()=>[...u[0]||(u[0]=[e("h2",{class:"card-title text-3xl font-bold mb-6"},"分数与百分比转换（进阶）",-1),e("div",{class:"text-left w-full mb-8"},[e("div",{class:"bg-base-200 p-5 rounded-2xl"},[e("div",{class:"flex items-center gap-2 mb-4 text-base-content/80"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("h3",{class:"font-bold text-lg"},"题型说明")]),e("div",{class:"space-y-3"},[e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-primary badge-sm"},"1"),d(" 分数 ➔ 百分比 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[d(" 如 "),e("span",{class:"font-mono font-bold mx-1"},"2/3"),d(" 需输入 "),e("span",{class:"font-mono font-bold mx-1"},"66.7"),e("div",{class:"text-xs text-warning mt-1 font-medium"},"* 至少精确到一位小数")])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-base-300/50 shadow-sm flex flex-col gap-1"},[e("div",{class:"font-bold text-base flex items-center gap-2"},[e("span",{class:"badge badge-secondary badge-sm"},"2"),d(" 百分比/小数 ➔ 分数 ")]),e("div",{class:"text-sm opacity-80 pl-7"},[d(" 如 "),e("span",{class:"font-mono font-bold mx-1"},"66.7%"),d(" 需输入 "),e("span",{class:"font-mono font-bold mx-1"},"3 分之 2"),e("div",{class:"text-xs opacity-60 mt-1"},'(使用键盘上的"分之"键或"\\"键输入分数)')])]),e("div",{class:"bg-base-100 p-4 rounded-xl border border-warning/30 shadow-sm"},[e("div",{class:"text-sm opacity-80"},[e("span",{class:"font-bold text-warning"},"进阶版特点："),d(" 包含 2/3, 3/4, 2/5~4/5, 5/6, 2/7~3/7, 3/8~7/8, 2/9~8/9 等特殊分数 ")])])])])],-1)])]),default:m(({question:n,confirm:b})=>[e("div",A,[e("div",N,[e("h2",R,[v(t.MathDisplay,{value:n.display},null,8,["value"]),u[2]||(u[2]=e("span",null,"=",-1)),n.type==="toPercentage"?(l(),f(P,{key:0},[e("span",T,[t.currentInput?(l(),f("span",K,F(t.currentInput),1)):(l(),f("span",Q,"?"))]),u[1]||(u[1]=e("span",null,"%",-1))],64)):(l(),p(t.MathDisplay,{key:1,value:t.currentInput||"?\\?",class:"min-w-20 px-3 py-1 rounded-lg bg-base-200 border-2 border-primary/50"},null,8,["value"]))])])]),e("div",V,[v(t.VirtualKeypad,{onInput:_=>t.handleInput(_,n.type),onDelete:t.handleDelete,onConfirm:()=>t.handleConfirm(b,n.type)},null,8,["onInput","onConfirm"])])]),_:1},8,["type","storageKey","numQuestions"]))}const te=M(S,[["render",W]]);export{te as default};
